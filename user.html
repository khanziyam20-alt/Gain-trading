<style>
    /* New Styles for Request Buttons */
    .request-section { display: flex; gap: 10px; margin-top: 20px; }
    .add-btn { background: #10b981 !important; color: white !important; }
    .withdraw-btn { background: #f59e0b !important; color: white !important; }
    .modal { background: rgba(0,0,0,0.8); position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: none; justify-content: center; align-items: center; }
    .modal-content { background: #1e293b; padding: 30px; border-radius: 15px; width: 300px; border: 1px solid #334155; }
</style>

<div class="stat-card" style="max-width: 400px; margin: auto; margin-top: 20px;">
    <h3>Transactions</h3>
    <div class="request-section">
        <button class="action-btn add-btn" onclick="openModal('Deposit')">Deposit Money</button>
        <button class="action-btn withdraw-btn" onclick="openModal('Withdraw')">Withdraw Money</button>
    </div>
</div>

<div id="requestModal" class="modal">
    <div class="modal-content">
        <h3 id="modalTitle">Request</h3>
        <input type="number" id="requestAmount" placeholder="Enter Amount ($)">
        <button class="action-btn" onclick="submitRequest()">Submit Request</button>
        <button class="action-btn" style="background:none; color:#94a3b8;" onclick="closeModal()">Cancel</button>
    </div>
</div>

<script type="module">
    // ... (Existing Firebase Imports & Config) ...
    import { addDoc, collection } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    let requestType = "";

    window.openModal = (type) => {
        requestType = type;
        document.getElementById('modalTitle').innerText = type + " Request";
        document.getElementById('requestModal').style.display = 'flex';
    };

    window.closeModal = () => {
        document.getElementById('requestModal').style.display = 'none';
    };

    window.submitRequest = async () => {
        const amount = parseFloat(document.getElementById('requestAmount').value);
        if (!amount || amount <= 0) return alert("Please enter a valid amount");

        try {
            await addDoc(collection(db, "requests"), {
                userId: auth.currentUser.uid,
                userName: auth.currentUser.displayName,
                userEmail: auth.currentUser.email,
                amount: amount,
                type: requestType,
                status: "pending",
                timestamp: new Date()
            });
            alert("Request sent to Admin for approval!");
            closeModal();
        } catch (e) { alert("Error: " + e.message); }
    };
    // ... (Existing Auth & Profit logic) ...
</script>
